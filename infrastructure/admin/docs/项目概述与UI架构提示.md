# 项目概述与 UI 架构提示（Admin 管理面板）

> 面向 HavenButler 多微服务集群的“运维管理中枢”。本文件用于统一项目叙述、界面信息架构与微文案提示，指导 Vue3 管理端的设计与实现。

## 1. 电梯陈述（一句话）
- HavenButler Admin：一站式的微服务态势感知与治理平台，聚合监控、告警、配置与环境管理能力，帮助你“更快发现、更稳处置”。

## 2. 项目定位与价值
- 定位：面向运维/后端开发的“内网运维面板”，与 Spring Boot Admin 深度集成。
- 价值：
  - 态势可视：服务健康/实例/核心指标一屏直达；
  - 处置高效：重启/下线/注册/刷新配置等操作在同域完成；
  - 安全稳健：最小端口暴露、基础认证、同源部署、操作审计。

## 3. 目标用户与场景
- 目标用户：运维工程师、后端开发、SRE 值守人员。
- 核心场景：
  - 值守大屏：实时健康总览（SSE/轮询），异常高亮；
  - 故障处置：查看实例健康、日志片段、重新注册或临时下线；
  - 变更管理：环境切换、配置刷新、告警规则编辑与测试。

## 4. 术语约定
- 服务（Service）：Nacos 注册的业务单元，`<name>-service`。
- 实例（Instance）：服务的运行节点（host:port）。
- 总览（Overview）：跨实例聚合的健康/指标视图。
- 状态（Status）：`UP / DEGRADED / DOWN / UNKNOWN`。

## 5. 信息架构（IA）与导航
- 顶栏：品牌/环境切换（只读显示 + 管理入口）/用户（登录态）
- 侧栏：
  - Dashboard（总览）
  - Services（服务）
  - Alerts（告警）
  - Environment（环境）
  - Settings（设置）
- 底栏（可选）：版本信息、支援入口与文档链接

## 6. 页面结构与组件分层
- Dashboard
  - 统计卡：`服务总数 / 正常 / 异常 / 升级中`
  - 服务格子（按状态分组）：`StatusTag + MetricCard`
  - 实时：SSE → `onmessage` 更新；失败回退轮询（5s）
- Services
  - 顶部筛选：状态/关键字；服务列表 + 分页；
  - 服务行操作：详情、日志、Nacos 信息（Drawer/跳转）
- Service Detail
  - Header：状态、实例数、版本、区域；
  - Tabs：Health / Metrics / Logs / Nacos；
  - Logs：级别筛选、本地分页、关键字高亮；
- Alerts
  - 列表：级别/状态/时间过滤；
  - 详情：处理/忽略/批量操作；
  - 规则：CRUD + 测试；
- Environment
  - 当前环境显示、可用环境、刷新配置、切换（需确认对话框）
- Settings
  - 主题/可访问性（色弱/高对比）/刷新间隔；只读持久化（localStorage）

## 7. 认证与安全（前端约束）
- 登录态：Basic 串（`Authorization: Basic ...`）仅存 sessionStorage；关闭浏览器即失效。
- SSE：同源部署后浏览器会携带会话；若 401 则降级轮询并提示“认证已过期，请重新登录”。
- 风险操作：重启/下线/切换环境须二次确认；默认按钮文案为“我已知晓风险，继续操作”。

## 8. 微文案（提示语）规范
- 语气：专业、克制、清晰、避免指责；
- 成功：
  - “操作成功” / “已刷新配置” / “规则创建成功”；
- 进行中：
  - “正在加载服务总览…” / “正在获取日志，请稍候”；
- 降级：
  - “实时连接异常，已切换为 5 秒轮询”；
- 错误：
  - “请求失败，请稍后重试（错误码：{code}）”；
  - “无法连接后端服务，请检查网络或联系管理员”；
- 空态：
  - “暂无数据，尝试调整筛选条件或稍后再试”；
- 风险确认：
  - 标题：“请确认风险操作”；
  - 描述：“该操作可能导致流量中断，请确认当前窗口期与回滚预案已就绪。”
- 表单校验：
  - “必填项不能为空”；“数值必须大于 0”；“请输入合法的 URL/端口”。

## 9. 颜色语义与可访问性
- 状态色：UP=绿色、DEGRADED=黄色、DOWN=红色、UNKNOWN=灰色；
- 对比度：正文≥4.5:1；标题≥7:1；
- 键盘可达：所有可交互元素可 Tab 聚焦，`aria-label` 补齐。

## 10. 交互准则（关键）
- 实时数据优先“增量更新”，避免整表重绘；
- 列表默认 20 条/页，最大 100；
- 搜索输入防抖 300ms；
- 图表刷新节流（≥1s）；
- 失败指数退避：5→10→20s，封顶 60s。

## 11. 性能基线（目标）
- 首屏（Dashboard）TTI ≤ 1.5s（内网）；
- 交互响应 ≤ 100ms；
- 列表渲染 ≤ 200ms/100 行；
- Web Vitals：LCP ≤ 2.0s、CLS ≤ 0.1。

## 12. 同源部署（要点）
- Nginx 代理 `/api/` → `http://admin-service:8888/`；
- 构建产物 `dist/` 部署至 `/usr/share/nginx/html`；
- Dockerfile 与 `nginx.conf` 示例见：`docs/管理端-Vue3-开发与部署.md`。

## 13. 与后端的契约
- 基本认证（Basic）为主，SSE 同源；
- 返回 `ResponseWrapper<T>` 与错误码，用于前端统一处理；
- 新增接口与字段，需在 `docs/管理端-API规范.md` 同步。

## 14. 链接与参考
- 开发与部署：`docs/管理端-Vue3-开发与部署.md`
- API 规范：`docs/管理端-API规范.md`
- 架构规范：`docs/Nacos-统一配置与服务发现设计.md`

---

备注：本文档将随 UI 的演进（导航项、新模块）持续更新，保持“简洁直达”的微文案风格与 Apple HIG 的一致性。
